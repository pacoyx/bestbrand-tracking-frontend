import{a as d,b as s}from"./chunk-BTU3H2EV.js";import{Xa as r,a as p,b as l}from"./chunk-GY6DJ5HH.js";import{X as n,aa as m}from"./chunk-MHUA435C.js";import{f as i}from"./chunk-EQDQRRRY.js";var w=class t{constructor(e){this.http=e}apiUrl=r.apiUrlBase;login(e,o){let v={username:e,password:o},a=new p({"Content-Type":"application/json"});return this.http.post(this.apiUrl+r.EPlogin,v,{headers:a})}getCurrentUser(){let e=JSON.parse(localStorage.getItem("bbtrack")||"{}");return{driverId:e.conductorId,username:e.nombre,userId:e.idUser,roles:e.role}}static \u0275fac=function(o){return new(o||t)(m(l))};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};var c=s("Preferences",{web:()=>import("./chunk-Z7NX5GTM.js").then(t=>new t.PreferencesWeb)});var b=class t{isNative;constructor(){this.isNative=d.isNativePlatform()}set(e,o){return i(this,null,function*(){this.isNative?yield c.set({key:e,value:o}):localStorage.setItem(e,o)})}get(e){return i(this,null,function*(){if(this.isNative){let{value:o}=yield c.get({key:e});return o}else return localStorage.getItem(e)})}remove(e){return i(this,null,function*(){this.isNative?yield c.remove({key:e}):localStorage.removeItem(e)})}clear(){return i(this,null,function*(){this.isNative?yield c.clear():localStorage.clear()})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};var h=s("Device",{web:()=>import("./chunk-EFIF5W3C.js").then(t=>new t.DeviceWeb)});var R=class t{constructor(e){this.http=e}apiUrl=r.apiUrlBase;getDeviceId(){return i(this,null,function*(){return(yield h.getId()).identifier})}registrarDispositivo(e){let o=new p({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}${r.EPRegistrarDispositivo}`,e,{headers:o})}guardarUbicacion(e){let o=new p({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}${r.EPRegistrarUbicacion}`,e,{headers:o})}static \u0275fac=function(o){return new(o||t)(m(l))};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})};function U(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,o){return new Proxy({},{get(v,a){return(P,C,f)=>{let g=t.Capacitor.Plugins[o];if(g===void 0){f(new Error(`Capacitor plugin ${o} not found`));return}if(typeof g[a]!="function"){f(new Error(`Method ${a} not found in Capacitor plugin ${o}`));return}i(this,null,function*(){try{let u=yield g[a](P);C(u)}catch(u){f(u)}})}}})}})}function D(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,o){return t.cordova.plugins[o]}})}function y(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?U(window):window.cordova!==void 0&&D(window))}var Z=s("Geolocation",{web:()=>import("./chunk-DQPZSQWC.js").then(t=>new t.GeolocationWeb)});y();export{w as a,b,R as c,Z as d};
